/**
 * sparse-octree v5.0.1 build Mon Jul 02 2018
 * https://github.com/vanruesc/sparse-octree
 * Copyright 2018 Raoul van RÃ¼schen, Zlib
 */
(function(e,t){'object'==typeof exports&&'undefined'!=typeof module?t(exports):'function'==typeof define&&define.amd?define(['exports'],t):t(e.SPARSEOCTREE={})})(this,function(e){'use strict';function t(e,t,a){return M(A(e,a),t)}function n(e,t,a,n,l,y){var i=0;return e>t&&e>a?(l<e&&(i|=2),y<e&&(i|=1)):t>a?(n<t&&(i|=4),y<t&&(i|=1)):(n<a&&(i|=4),l<a&&(i|=2)),i}function l(e,t,a,n){var l=void 0,y=0;return t<a?(l=t,y=0):(l=a,y=1),n<l&&(y=2),r[e][y]}function y(e,t,a,i,o,r,u,s,d){var c=e.children,x=void 0,m=void 0,k=void 0,v=void 0;if(0<=o&&0<=r&&0<=u)if(null===c)d.push(e);else{m=.5*(t+o),k=.5*(a+r),v=.5*(i+u),x=n(t,a,i,m,k,v);do 0===x?(y(c[Ve],t,a,i,m,k,v,s,d),x=l(x,m,k,v)):1===x?(y(c[1^Ve],t,a,v,m,k,u,s,d),x=l(x,m,k,u)):2===x?(y(c[2^Ve],t,k,i,m,r,v,s,d),x=l(x,m,r,v)):3===x?(y(c[3^Ve],t,k,v,m,r,u,s,d),x=l(x,m,r,u)):4===x?(y(c[4^Ve],m,a,i,o,k,v,s,d),x=l(x,o,k,v)):5===x?(y(c[5^Ve],m,a,v,o,k,u,s,d),x=l(x,o,k,u)):6===x?(y(c[6^Ve],m,k,i,o,r,v,s,d),x=l(x,o,r,v)):7===x?(y(c[7^Ve],m,k,v,o,r,u,s,d),x=8):void 0;while(8>x)}}function o(e){var t=e.children,a=0,n=void 0,y=void 0,r=void 0;if(null!==t)for(n=0,y=t.length;n<y;++n)r=1+o(t[n]),r>a&&(a=r);return a}function s(e,t,a){var n=e.children,y=void 0,o=void 0;if(Fe.min=e.min,Fe.max=e.max,t.intersectsBox(Fe))if(null!==n)for(y=0,o=n.length;y<o;++y)s(n[y],t,a);else a.push(e)}function d(e,t,a,n){var y=e.children,o=void 0,r=void 0;if(a===t)n.push(e);else if(null!==y)for(++a,o=0,r=y.length;o<r;++o)d(y[o],t,a,n)}function x(e){var t=e.children,a=0,n=void 0,y=void 0;if(null!==t)for(n=0,y=t.length;n<y;++n)a+=x(t[n]);else null!==e.points&&(a=e.points.length);return a}function k(e,t,a,n,y){var o=n.children,r=!1,u=!1,s=void 0,d=void 0;if(n.contains(e,a.bias)){if(null===o){if(null===n.points)n.points=[],n.data=[];else for(s=0,d=n.points.length;!r&&s<d;++s)r=n.points[s].equals(e);r?(n.data[s-1]=t,u=!0):n.points.length<a.maxPoints||y===a.maxDepth?(n.points.push(e.clone()),n.data.push(t),++a.pointCount,u=!0):(n.split(),n.redistribute(a.bias),o=n.children)}if(null!==o)for(++y,s=0,d=o.length;!u&&s<d;++s)u=k(e,t,a,o[s],y)}return u}function z(e,t,a,n){var y=a.children,o=null,r=void 0,u=void 0,s=void 0,d=void 0,c=void 0;if(a.contains(e,t.bias))if(null!==y)for(r=0,u=y.length;null===o&&r<u;++r)o=z(e,t,y[r],a);else if(null!==a.points)for(s=a.points,d=a.data,(r=0,u=s.length);r<u;++r)if(s[r].equals(e)){c=u-1,o=d[r],r<c&&(s[r]=s[c],d[r]=d[c]),s.pop(),d.pop(),--t.pointCount,null!==n&&x(n)<=t.maxPoints&&n.merge();break}return o}function h(e,t,a){var n=a.children,y=null,o=void 0,r=void 0,u=void 0;if(a.contains(e,t.bias))if(null!==n)for(o=0,r=n.length;null===y&&o<r;++o)y=h(e,t,n[o]);else if(null!==a.points)for(u=a.points,o=0,r=u.length;null===y&&o<r;++o)e.distanceToSquared(u[o])<=Ye&&(y=a.data[o]);return y}function g(e,t,a,n,y,o){var r=n.children,u=null,s=void 0,d=void 0,c=void 0;if(n.contains(e,a.bias))if(!n.contains(t,a.bias))u=z(e,a,n,y),k(t,u,a,y,o-1);else if(null!==r)for(++o,s=0,d=r.length;null===u&&s<d;++s)u=g(e,t,a,r[s],n,o);else if(null!==n.points)for(c=n.points,s=0,d=c.length;s<d;++s)if(e.distanceToSquared(c[s])<=Ye){c[s].copy(t),u=n.data[s];break}return u}function f(e,t,a,n){var y=n.points,o=n.children,r=null,u=t,s=void 0,d=void 0,c=void 0,x=void 0,m=void 0,k=void 0,v=void 0;if(null!==o)for(m=o.map(function(t){return{octant:t,distance:t.distanceToCenterSquared(e)}}).sort(function(e,t){return e.distance-t.distance}),s=0,d=m.length;s<d;++s)k=m[s].octant,k.contains(e,u)&&(v=f(e,u,a,k),null!==v&&(x=v.point.distanceToSquared(e),(!a||0<x)&&x<u&&(u=x,r=v)));else if(null!==y)for(s=0,d=y.length;s<d;++s)c=y[s],x=e.distanceToSquared(c),(!a||0<x)&&x<u&&(u=x,r={point:c.clone(),data:n.data[s]});return r}function S(e,t,a,n,y){var o=n.points,r=n.children,u=void 0,s=void 0,d=void 0,c=void 0,x=void 0;if(null!==r)for(u=0,s=r.length;u<s;++u)x=r[u],x.contains(e,t)&&S(e,t,a,x,y);else if(null!==o)for(u=0,s=o.length;u<s;++u)d=o[u],c=e.distanceToSquared(d),(!a||0<c)&&c<=t*t&&y.push({point:d.clone(),data:n.data[u]})}var i=Math.PI,P=Math.atan2,w=Math.round,T=Math.ceil,V=Math.floor,C=Math.abs,F=Math.acos,A=Math.min,M=Math.max,X=Math.sqrt,Y=Math.cos,Z=Math.sin,O=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},B=function(){function e(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),E=function e(t,a,n){null===t&&(t=Function.prototype);var l=Object.getOwnPropertyDescriptor(t,a);if(void 0===l){var y=Object.getPrototypeOf(t);return null===y?void 0:e(y,a,n)}if('value'in l)return l.value;var i=l.get;return void 0===i?void 0:i.call(n)},_=function(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},R=function(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e},D=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)},L=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;O(this,e),this.x=t,this.y=a,this.z=n}return B(e,[{key:'set',value:function(e,t,a){return this.x=e,this.y=t,this.z=a,this}},{key:'copy',value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:'clone',value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:'setFromSpherical',value:function(e){var t=Z(e.phi)*e.radius;return this.x=t*Z(e.theta),this.y=Y(e.phi)*e.radius,this.z=t*Y(e.theta),this}},{key:'setFromCylindrical',value:function(e){return this.x=e.radius*Z(e.theta),this.y=e.y,this.z=e.radius*Y(e.theta),this}},{key:'setFromMatrixColumn',value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:'setFromMatrixPosition',value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:'setFromMatrixScale',value:function(e){var t=this.setFromMatrixColumn(e,0).length(),a=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=a,this.z=n,this}},{key:'add',value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:'addScalar',value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:'addVectors',value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:'addScaledVector',value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:'sub',value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:'subScalar',value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:'subVectors',value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:'multiply',value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:'multiplyScalar',value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:'multiplyVectors',value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:'divide',value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:'divideScalar',value:function(e){return this.x/=e,this.y/=e,this.z/=e,this}},{key:'crossVectors',value:function(e,t){var a=e.x,n=e.y,l=e.z,y=t.x,i=t.y,o=t.z;return this.x=n*o-l*i,this.y=l*y-a*o,this.z=a*i-n*y,this}},{key:'cross',value:function(e){return this.crossVectors(this,e)}},{key:'transformDirection',value:function(t){var a=this.x,n=this.y,l=this.z,y=t.elements;return this.x=y[0]*a+y[4]*n+y[8]*l,this.y=y[1]*a+y[5]*n+y[9]*l,this.z=y[2]*a+y[6]*n+y[10]*l,this.normalize()}},{key:'applyMatrix3',value:function(t){var a=this.x,n=this.y,l=this.z,y=t.elements;return this.x=y[0]*a+y[3]*n+y[6]*l,this.y=y[1]*a+y[4]*n+y[7]*l,this.z=y[2]*a+y[5]*n+y[8]*l,this}},{key:'applyMatrix4',value:function(t){var a=this.x,n=this.y,l=this.z,y=t.elements;return this.x=y[0]*a+y[4]*n+y[8]*l+y[12],this.y=y[1]*a+y[5]*n+y[9]*l+y[13],this.z=y[2]*a+y[6]*n+y[10]*l+y[14],this}},{key:'applyQuaternion',value:function(e){var t=this.x,a=this.y,n=this.z,l=e.x,y=e.y,i=e.z,o=e.w,r=o*t+y*n-i*a,u=o*a+i*t-l*n,s=o*n+l*a-y*t,d=-l*t-y*a-i*n;return this.x=r*o+d*-l+u*-i-s*-y,this.y=u*o+d*-y+s*-l-r*-i,this.z=s*o+d*-i+r*-y-u*-l,this}},{key:'negate',value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:'dot',value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:'reflect',value:function(e){var t=e.x,a=e.y,n=e.z;return this.sub(e.multiplyScalar(2*this.dot(e))),e.set(t,a,n),this}},{key:'angleTo',value:function(e){var t=this.dot(e)/X(this.lengthSquared()*e.lengthSquared());return F(A(M(t,-1),1))}},{key:'manhattanLength',value:function(){return C(this.x)+C(this.y)+C(this.z)}},{key:'lengthSquared',value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:'length',value:function(){return X(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:'manhattanDistanceTo',value:function(e){return C(this.x-e.x)+C(this.y-e.y)+C(this.z-e.z)}},{key:'distanceToSquared',value:function(e){var t=this.x-e.x,a=this.y-e.y,n=this.z-e.z;return t*t+a*a+n*n}},{key:'distanceTo',value:function(e){return X(this.distanceToSquared(e))}},{key:'normalize',value:function(){return this.divideScalar(this.length())}},{key:'setLength',value:function(e){return this.normalize().multiplyScalar(e)}},{key:'min',value:function(e){return this.x=A(this.x,e.x),this.y=A(this.y,e.y),this.z=A(this.z,e.z),this}},{key:'max',value:function(e){return this.x=M(this.x,e.x),this.y=M(this.y,e.y),this.z=M(this.z,e.z),this}},{key:'clamp',value:function(e,t){return this.x=M(e.x,A(t.x,this.x)),this.y=M(e.y,A(t.y,this.y)),this.z=M(e.z,A(t.z,this.z)),this}},{key:'floor',value:function(){return this.x=V(this.x),this.y=V(this.y),this.z=V(this.z),this}},{key:'ceil',value:function(){return this.x=T(this.x),this.y=T(this.y),this.z=T(this.z),this}},{key:'round',value:function(){return this.x=w(this.x),this.y=w(this.y),this.z=w(this.z),this}},{key:'lerp',value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:'lerpVectors',value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:'equals',value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}}]),e}(),j=new L,v=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L(1/0,1/0,1/0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L(-Infinity,-Infinity,-Infinity);O(this,e),this.min=t,this.max=a}return B(e,[{key:'set',value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:'copy',value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'makeEmpty',value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-Infinity,this}},{key:'isEmpty',value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:'getCenter',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:'getSize',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:'setFromSphere',value:function(e){return this.set(e.center,e.center),this.expandByScalar(e.radius),this}},{key:'expandByPoint',value:function(e){return this.min.min(e),this.max.max(e),this}},{key:'expandByVector',value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:'expandByScalar',value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:'setFromPoints',value:function(e){var t,a;for(this.min.set(0,0,0),this.max.set(0,0,0),(t=0,a=e.length);t<a;++t)this.expandByPoint(e[t]);return this}},{key:'setFromCenterAndSize',value:function(e,t){var a=j.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}},{key:'clampPoint',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L;return t.copy(e).clamp(this.min,this.max)}},{key:'distanceToPoint',value:function(e){var t=j.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:'applyMatrix4',value:function(e){var t=this.min,a=this.max;if(!this.isEmpty()){var n=e.elements,l=n[0]*t.x,y=n[1]*t.x,i=n[2]*t.x,o=n[0]*a.x,r=n[1]*a.x,u=n[2]*a.x,s=n[4]*t.y,d=n[5]*t.y,c=n[6]*t.y,x=n[4]*a.y,m=n[5]*a.y,k=n[6]*a.y,v=n[8]*t.z,p=n[9]*t.z,z=n[10]*t.z,h=n[8]*a.z,g=n[9]*a.z,f=n[10]*a.z;t.x=A(l,o)+A(s,x)+A(v,h)+n[12],t.y=A(y,r)+A(d,m)+A(p,g)+n[13],t.z=A(i,u)+A(c,k)+A(z,f)+n[14],a.x=M(l,o)+M(s,x)+M(v,h)+n[12],a.y=M(y,r)+M(d,m)+M(p,g)+n[13],a.z=M(i,u)+M(c,k)+M(z,f)+n[14]}return this}},{key:'translate',value:function(e){return this.min.add(e),this.max.add(e),this}},{key:'intersect',value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:'union',value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:'containsPoint',value:function(e){var t=this.min,a=this.max;return e.x>=t.x&&e.y>=t.y&&e.z>=t.z&&e.x<=a.x&&e.y<=a.y&&e.z<=a.z}},{key:'containsBox',value:function(e){var t=this.min,a=this.max,n=e.min,l=e.max;return t.x<=n.x&&l.x<=a.x&&t.y<=n.y&&l.y<=a.y&&t.z<=n.z&&l.z<=a.z}},{key:'intersectsBox',value:function(e){var t=this.min,a=this.max,n=e.min,l=e.max;return l.x>=t.x&&l.y>=t.y&&l.z>=t.z&&n.x<=a.x&&n.y<=a.y&&n.z<=a.z}},{key:'intersectsSphere',value:function(e){var t=this.clampPoint(e.center,j);return t.distanceToSquared(e.center)<=e.radius*e.radius}},{key:'intersectsPlane',value:function(e){var t,a;return 0<e.normal.x?(t=e.normal.x*this.min.x,a=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,a=e.normal.x*this.min.x),0<e.normal.y?(t+=e.normal.y*this.min.y,a+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,a+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,a+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,a+=e.normal.z*this.min.z),t<=e.constant&&a>=e.constant}},{key:'equals',value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Q=new v,I=new L,N=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;O(this,e),this.center=t,this.radius=a}return B(e,[{key:'set',value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:'copy',value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'setFromPoints',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Q.setFromPoints(e).getCenter(this.center),a=0,n=void 0,y=void 0;for(n=0,y=e.length;n<y;++n)a=M(a,t.distanceToSquared(e[n]));return this.radius=X(a),this}},{key:'setFromBox',value:function(e){return e.getCenter(this.center),this.radius=.5*e.getSize(I).length(),this}},{key:'isEmpty',value:function(){return 0>=this.radius}},{key:'translate',value:function(e){return this.center.add(e),this}},{key:'clampPoint',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L,a=this.center.distanceToSquared(e);return t.copy(e),a>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:'distanceToPoint',value:function(e){return e.distanceTo(this.center)-this.radius}},{key:'containsPoint',value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:'intersectsSphere',value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:'intersectsBox',value:function(e){return e.intersectsSphere(this)}},{key:'intersectsPlane',value:function(e){return C(e.distanceToPoint(this.center))<=this.radius}},{key:'equals',value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}]),e}(),U=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;O(this,e),this.x=t,this.y=a}return B(e,[{key:'set',value:function(e,t){return this.x=e,this.y=t,this}},{key:'copy',value:function(e){return this.x=e.x,this.y=e.y,this}},{key:'clone',value:function(){return new this.constructor(this.x,this.y)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:'add',value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:'addScalar',value:function(e){return this.x+=e,this.y+=e,this}},{key:'addVectors',value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:'addScaledVector',value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:'sub',value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:'subScalar',value:function(e){return this.x-=e,this.y-=e,this}},{key:'subVectors',value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:'multiply',value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:'multiplyScalar',value:function(e){return this.x*=e,this.y*=e,this}},{key:'divide',value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:'divideScalar',value:function(e){return this.x/=e,this.y/=e,this}},{key:'applyMatrix3',value:function(t){var a=this.x,n=this.y,l=t.elements;return this.x=l[0]*a+l[3]*n+l[6],this.y=l[1]*a+l[4]*n+l[7],this}},{key:'dot',value:function(e){return this.x*e.x+this.y*e.y}},{key:'manhattanLength',value:function(){return C(this.x)+C(this.y)}},{key:'lengthSquared',value:function(){return this.x*this.x+this.y*this.y}},{key:'length',value:function(){return X(this.x*this.x+this.y*this.y)}},{key:'manhattanDistanceTo',value:function(e){return C(this.x-e.x)+C(this.y-e.y)}},{key:'distanceToSquared',value:function(e){var t=this.x-e.x,a=this.y-e.y;return t*t+a*a}},{key:'distanceTo',value:function(e){return X(this.distanceToSquared(e))}},{key:'normalize',value:function(){return this.divideScalar(this.length())}},{key:'setLength',value:function(e){return this.normalize().multiplyScalar(e)}},{key:'min',value:function(e){return this.x=A(this.x,e.x),this.y=A(this.y,e.y),this}},{key:'max',value:function(e){return this.x=M(this.x,e.x),this.y=M(this.y,e.y),this}},{key:'clamp',value:function(e,t){return this.x=M(e.x,A(t.x,this.x)),this.y=M(e.y,A(t.y,this.y)),this}},{key:'floor',value:function(){return this.x=V(this.x),this.y=V(this.y),this}},{key:'ceil',value:function(){return this.x=T(this.x),this.y=T(this.y),this}},{key:'round',value:function(){return this.x=w(this.x),this.y=w(this.y),this}},{key:'negate',value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:'angle',value:function(){var e=P(this.y,this.x);return 0>e&&(e+=2*i),e}},{key:'lerp',value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:'lerpVectors',value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:'rotateAround',value:function(e,t){var a=Y(t),n=Z(t),l=this.x-e.x,i=this.y-e.y;return this.x=l*a-i*n+e.x,this.y=l*n+i*a+e.y,this}},{key:'equals',value:function(e){return e.x===this.x&&e.y===this.y}},{key:'width',get:function(){return this.x},set:function(e){return this.x=e}},{key:'height',get:function(){return this.y},set:function(e){return this.y=e}}]),e}(),H=new U,G=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new U(1/0,1/0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new U(-Infinity,-Infinity);O(this,e),this.min=t,this.max=a}return B(e,[{key:'set',value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:'copy',value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'makeEmpty',value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-Infinity,this}},{key:'isEmpty',value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:'getCenter',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new U;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:'getSize',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new U;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:'getBoundingSphere',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new N;return this.getCenter(e.center),e.radius=.5*this.getSize(H).length(),e}},{key:'expandByPoint',value:function(e){return this.min.min(e),this.max.max(e),this}},{key:'expandByVector',value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:'expandByScalar',value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:'setFromPoints',value:function(e){var t,a;for(this.min.set(0,0),this.max.set(0,0),(t=0,a=e.length);t<a;++t)this.expandByPoint(e[t]);return this}},{key:'setFromCenterAndSize',value:function(e,t){var a=H.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(a),this.max.copy(e).add(a),this}},{key:'clampPoint',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new U;return t.copy(e).clamp(this.min,this.max)}},{key:'distanceToPoint',value:function(e){var t=H.copy(e).clamp(this.min,this.max);return t.sub(e).length()}},{key:'translate',value:function(e){return this.min.add(e),this.max.add(e),this}},{key:'intersect',value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:'union',value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:'containsPoint',value:function(e){var t=this.min,a=this.max;return e.x>=t.x&&e.y>=t.y&&e.x<=a.x&&e.y<=a.y}},{key:'containsBox',value:function(e){var t=this.min,a=this.max,n=e.min,l=e.max;return t.x<=n.x&&l.x<=a.x&&t.y<=n.y&&l.y<=a.y}},{key:'intersectsBox',value:function(e){var t=this.min,a=this.max,n=e.min,l=e.max;return l.x>=t.x&&l.y>=t.y&&n.x<=a.x&&n.y<=a.y}},{key:'equals',value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),W=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;O(this,e),this.radius=t,this.theta=a,this.y=n}return B(e,[{key:'set',value:function(e,t,a){return this.radius=e,this.theta=t,this.y=a,this}},{key:'copy',value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'setFromVector3',value:function(e){return this.radius=X(e.x*e.x+e.z*e.z),this.theta=P(e.x,e.z),this.y=e.y,this}}]),e}(),J=function(){function e(){O(this,e),this.elements=new Float32Array([1,0,0,0,1,0,0,0,1])}return B(e,[{key:'set',value:function(e,t,a,n,l,y,i,o,r){var u=this.elements;return u[0]=e,u[3]=t,u[6]=a,u[1]=n,u[4]=l,u[7]=y,u[2]=i,u[5]=o,u[8]=r,this}},{key:'identity',value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:'copy',value:function(e){var t=e.elements,a=this.elements;return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],this}},{key:'clone',value:function(){return new this.constructor().fromArray(this.elements)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n=void 0;for(n=0;9>n;++n)a[n]=e[n+t];return this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n=void 0;for(n=0;9>n;++n)e[n+t]=a[n];return e}},{key:'multiplyMatrices',value:function(e,t){var a=e.elements,n=t.elements,l=this.elements,y=a[0],i=a[3],o=a[6],r=a[1],u=a[4],s=a[7],d=a[2],c=a[5],x=a[8],m=n[0],k=n[3],v=n[6],p=n[1],z=n[4],h=n[7],g=n[2],f=n[5],S=n[8];return l[0]=y*m+i*p+o*g,l[3]=y*k+i*z+o*f,l[6]=y*v+i*h+o*S,l[1]=r*m+u*p+s*g,l[4]=r*k+u*z+s*f,l[7]=r*v+u*h+s*S,l[2]=d*m+c*p+x*g,l[5]=d*k+c*z+x*f,l[8]=d*v+c*h+x*S,this}},{key:'multiply',value:function(e){return this.multiplyMatrices(this,e)}},{key:'premultiply',value:function(e){return this.multiplyMatrices(e,this)}},{key:'multiplyScalar',value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:'determinant',value:function(){var t=this.elements,n=t[0],a=t[1],l=t[2],y=t[3],o=t[4],e=t[5],r=t[6],u=t[7],s=t[8];return n*o*s-n*e*u-a*y*s+a*e*r+l*y*u-l*o*r}},{key:'getInverse',value:function(e){var t=e.elements,a=this.elements,n=t[0],l=t[1],y=t[2],i=t[3],o=t[4],r=t[5],u=t[6],s=t[7],d=t[8],c=d*o-r*s,x=r*u-d*i,m=s*i-o*u,k=n*c+l*x+y*m,v=void 0;return 0==k?(console.error('Can\'t invert matrix, determinant is zero',e),this.identity()):(v=1/k,a[0]=c*v,a[1]=(y*s-d*l)*v,a[2]=(r*l-y*o)*v,a[3]=x*v,a[4]=(d*n-y*u)*v,a[5]=(y*i-r*n)*v,a[6]=m*v,a[7]=(l*u-s*n)*v,a[8]=(o*n-l*i)*v),this}},{key:'transpose',value:function(){var e=this.elements,a=void 0;return a=e[1],e[1]=e[3],e[3]=a,a=e[2],e[2]=e[6],e[6]=a,a=e[5],e[5]=e[7],e[7]=a,this}},{key:'scale',value:function(e,t){var a=this.elements;return a[0]*=e,a[3]*=e,a[6]*=e,a[1]*=t,a[4]*=t,a[7]*=t,this}},{key:'rotate',value:function(e){var t=Y(e),a=Z(e),n=this.elements,l=n[0],y=n[3],i=n[6],o=n[1],r=n[4],u=n[7];return n[0]=t*l+a*o,n[3]=t*y+a*r,n[6]=t*i+a*u,n[1]=-a*l+t*o,n[4]=-a*y+t*r,n[7]=-a*i+t*u,this}},{key:'translate',value:function(e,t){var a=this.elements;return a[0]+=e*a[2],a[3]+=e*a[5],a[6]+=e*a[8],a[1]+=t*a[2],a[4]+=t*a[5],a[7]+=t*a[8],this}},{key:'equals',value:function(e){var t=this.elements,a=e.elements,n=!0,l=void 0;for(l=0;n&&9>l;++l)t[l]!==a[l]&&(n=!1);return n}}]),e}(),K={XYZ:'XYZ',YZX:'YZX',ZXY:'ZXY',XZY:'XZY',YXZ:'YXZ',ZYX:'ZYX'},$=new L,ee=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;O(this,e),this.x=t,this.y=a,this.z=n,this.w=l}var a=Number.EPSILON;return B(e,[{key:'set',value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.w=n,this}},{key:'copy',value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:'clone',value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:'setFromEuler',value:function(e){var t=e.x,a=e.y,n=e.z,l=Y,y=Z,i=l(t/2),o=l(a/2),r=l(n/2),u=y(t/2),s=y(a/2),d=y(n/2);switch(e.order){case K.XYZ:this.x=u*o*r+i*s*d,this.y=i*s*r-u*o*d,this.z=i*o*d+u*s*r,this.w=i*o*r-u*s*d;break;case K.YXZ:this.x=u*o*r+i*s*d,this.y=i*s*r-u*o*d,this.z=i*o*d-u*s*r,this.w=i*o*r+u*s*d;break;case K.ZXY:this.x=u*o*r-i*s*d,this.y=i*s*r+u*o*d,this.z=i*o*d+u*s*r,this.w=i*o*r-u*s*d;break;case K.ZYX:this.x=u*o*r-i*s*d,this.y=i*s*r+u*o*d,this.z=i*o*d-u*s*r,this.w=i*o*r+u*s*d;break;case K.YZX:this.x=u*o*r+i*s*d,this.y=i*s*r+u*o*d,this.z=i*o*d-u*s*r,this.w=i*o*r-u*s*d;break;case K.XZY:this.x=u*o*r-i*s*d,this.y=i*s*r-u*o*d,this.z=i*o*d+u*s*r,this.w=i*o*r+u*s*d;}return this}},{key:'setFromAxisAngle',value:function(e,t){var a=t/2,n=Z(a);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Y(a),this}},{key:'setFromRotationMatrix',value:function(e){var t=e.elements,a=t[0],n=t[4],l=t[8],y=t[1],i=t[5],o=t[9],r=t[2],u=t[6],d=t[10],c=a+i+d,x=void 0;return 0<c?(x=.5/X(c+1),this.w=.25/x,this.x=(u-o)*x,this.y=(l-r)*x,this.z=(y-n)*x):a>i&&a>d?(x=2*X(1+a-i-d),this.w=(u-o)/x,this.x=.25*x,this.y=(n+y)/x,this.z=(l+r)/x):i>d?(x=2*X(1+i-a-d),this.w=(l-r)/x,this.x=(n+y)/x,this.y=.25*x,this.z=(o+u)/x):(x=2*X(1+d-a-i),this.w=(y-n)/x,this.x=(l+r)/x,this.y=(o+u)/x,this.z=.25*x),this}},{key:'setFromUnitVectors',value:function(e,t){var a=e.dot(t)+1;return 1e-6>a?(a=0,C(e.x)>C(e.z)?$.set(-e.y,e.x,0):$.set(0,-e.z,e.y)):$.crossVectors(e,t),this.x=$.x,this.y=$.y,this.z=$.z,this.w=a,this.normalize()}},{key:'invert',value:function(){return this.conjugate()}},{key:'conjugate',value:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this}},{key:'lengthSquared',value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:'length',value:function(){return X(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:'normalize',value:function(){var e=this.length(),t=void 0;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/e,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this}},{key:'dot',value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:'multiplyQuaternions',value:function(e,t){var a=e.x,n=e.y,l=e.z,y=e.w,i=t.x,o=t.y,r=t.z,u=t.w;return this.x=a*u+y*i+n*r-l*o,this.y=n*u+y*o+l*i-a*r,this.z=l*u+y*r+a*o-n*i,this.w=y*u-a*i-n*o-l*r,this}},{key:'multiply',value:function(e){return this.multiplyQuaternions(this,e)}},{key:'premultiply',value:function(e){return this.multiplyQuaternions(e,this)}},{key:'slerp',value:function(e,n){var t=this.x,l=this.y,y=this.z,i=this.w,o=void 0,r=void 0,u=void 0,d=void 0,c=void 0,x=void 0,m=void 0;return 1===n?this.copy(e):0<n&&(o=i*e.w+t*e.x+l*e.y+y*e.z,0>o?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,o=-o):this.copy(e),1<=o?(this.w=i,this.x=t,this.y=l,this.z=y):(r=1-o*o,c=1-n,r<=a?(this.w=c*i+n*this.w,this.x=c*t+n*this.x,this.y=c*l+n*this.y,this.z=c*y+n*this.z,this.normalize()):(u=X(r),d=P(u,o),x=Z(c*d)/u,m=Z(n*d)/u,this.w=i*x+this.w*m,this.x=t*x+this.x*m,this.y=l*x+this.y*m,this.z=y*x+this.z*m))),this}},{key:'equals',value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}}],[{key:'slerp',value:function(e,a,n,l){return n.copy(e).slerp(a,l)}},{key:'slerpFlat',value:function(e,n,l,y,i,o,r){var u=i[o],d=i[o+1],c=i[o+2],x=i[o+3],m=l[y],k=l[y+1],v=l[y+2],p=l[y+3],z=void 0,h=void 0,g=void 0,S=void 0,w=void 0,T=void 0,q=void 0,b=void 0;(p!==x||m!==u||k!==d||v!==c)&&(z=1-r,S=m*u+k*d+v*c+p*x,T=0<=S?1:-1,w=1-S*S,w>a&&(g=X(w),q=P(g,S*T),z=Z(z*q)/g,r=Z(r*q)/g),b=r*T,m=m*z+u*b,k=k*z+d*b,v=v*z+c*b,p=p*z+x*b,z===1-r&&(h=1/X(m*m+k*k+v*v+p*p),m*=h,k*=h,v*=h,p*=h)),e[n]=m,e[n+1]=k,e[n+2]=v,e[n+3]=p}}]),e}(),te=new J,m=new ee,q=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;O(this,e),this.x=t,this.y=a,this.z=n,this.order=e.defaultOrder}return B(e,[{key:'set',value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.order=n,this}},{key:'copy',value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.order=t.order,this}},{key:'clone',value:function(){return new this.constructor(this.x,this.y,this.z,this.order)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.order=e[t+3],this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.order,e}},{key:'toVector3',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L;return e.set(this.x,this.y,this.z)}},{key:'setFromRotationMatrix',value:function(e){var a=Math.asin,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.order,l=e.elements,y=l[0],i=l[4],o=l[8],r=l[1],u=l[5],s=l[9],d=l[2],c=l[6],x=l[10],m=1-1e-5;switch(n){case K.XYZ:{this.y=a(t(o,-1,1)),C(o)<m?(this.x=P(-s,x),this.z=P(-i,y)):(this.x=P(c,u),this.z=0);break}case K.YXZ:{this.x=a(-t(s,-1,1)),C(s)<m?(this.y=P(o,x),this.z=P(r,u)):(this.y=P(-d,y),this.z=0);break}case K.ZXY:{this.x=a(t(c,-1,1)),C(c)<m?(this.y=P(-d,x),this.z=P(-i,u)):(this.y=0,this.z=P(r,y));break}case K.ZYX:{this.y=a(-t(d,-1,1)),C(d)<m?(this.x=P(c,x),this.z=P(r,y)):(this.x=0,this.z=P(-i,u));break}case K.YZX:{this.z=a(t(r,-1,1)),C(r)<m?(this.x=P(-s,u),this.y=P(-d,y)):(this.x=0,this.y=P(o,x));break}case K.XZY:{this.z=a(-t(i,-1,1)),C(i)<m?(this.x=P(c,u),this.y=P(o,y)):(this.x=P(-s,x),this.y=0);break}}return this.order=n,this}},{key:'setFromQuaternion',value:function(e,t){return te.makeRotationFromQuaternion(e),this.setFromRotationMatrix(te,t)}},{key:'setFromVector3',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.order;return this.set(e.x,e.y,e.z,t)}},{key:'reorder',value:function(e){return m.setFromEuler(this),this.setFromQuaternion(m,e)}},{key:'equals',value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.order===this.order}}],[{key:'defaultOrder',get:function(){return K.XYZ}}]),e}(),ae=new L,a=new L,b=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L(1,0,0),a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;O(this,e),this.normal=t,this.constant=a}return B(e,[{key:'set',value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:'setComponents',value:function(e,t,a,n){return this.normal.set(e,t,a),this.constant=n,this}},{key:'copy',value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'setFromNormalAndCoplanarPoint',value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:'setFromCoplanarPoints',value:function(e,t,n){var l=ae.subVectors(n,t).cross(a.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(l,ae),this}},{key:'normalize',value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:'negate',value:function(){return this.normal.negate(),this.constant=-this.constant,this}},{key:'distanceToPoint',value:function(e){return this.normal.dot(e)+this.constant}},{key:'distanceToSphere',value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:'projectPoint',value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:'coplanarPoint',value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:'translate',value:function(e){return this.constant-=e.dot(this.normal),this}},{key:'intersectLine',value:function(e,a){var n=e.delta(ae),l=this.normal.dot(n);if(0===l)0===this.distanceToPoint(e.start)&&a.copy(e.start);else{var y=-(e.start.dot(this.normal)+this.constant)/l;0<=y&&1>=y&&a.copy(n).multiplyScalar(y).add(e.start)}return a}},{key:'intersectsLine',value:function(e){var t=this.distanceToPoint(e.start),a=this.distanceToPoint(e.end);return 0>t&&0<a||0>a&&0<t}},{key:'intersectsBox',value:function(e){return e.intersectsPlane(this)}},{key:'intersectsSphere',value:function(e){return e.intersectsPlane(this)}},{key:'equals',value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}]),e}(),ne=new L,le=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new b,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new b,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new b,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new b,y=4<arguments.length&&void 0!==arguments[4]?arguments[4]:new b,i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:new b;O(this,e),this.planes=[t,a,n,l,y,i]}return B(e,[{key:'set',value:function(e,t,a,n,l,y){var i=this.planes;return i[0].copy(e),i[1].copy(t),i[2].copy(a),i[3].copy(n),i[4].copy(l),i[5].copy(y),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'copy',value:function(e){var t=this.planes,a=void 0;for(a=0;6>a;++a)t[a].copy(e.planes[a]);return this}},{key:'setFromMatrix',value:function(e){var t=this.planes,a=e.elements,n=a[0],l=a[1],y=a[2],i=a[3],o=a[4],r=a[5],u=a[6],s=a[7],d=a[8],c=a[9],x=a[10],m=a[11],k=a[12],v=a[13],p=a[14],z=a[15];return t[0].setComponents(i-n,s-o,m-d,z-k).normalize(),t[1].setComponents(i+n,s+o,m+d,z+k).normalize(),t[2].setComponents(i+l,s+r,m+c,z+v).normalize(),t[3].setComponents(i-l,s-r,m-c,z-v).normalize(),t[4].setComponents(i-y,s-u,m-x,z-p).normalize(),t[5].setComponents(i+y,s+u,m+x,z+p).normalize(),this}},{key:'intersectsSphere',value:function(e){var t=this.planes,a=e.center,n=-e.radius,l=!0,y=void 0,o=void 0;for(y=0;6>y;++y)if(o=t[y].distanceToPoint(a),o<n){l=!1;break}return l}},{key:'intersectsBox',value:function(e){var t=this.planes,a=e.min,n=e.max,l=void 0,y=void 0;for(l=0;6>l;++l)if(y=t[l],ne.x=0<y.normal.x?n.x:a.x,ne.y=0<y.normal.y?n.y:a.y,ne.z=0<y.normal.z?n.z:a.z,0>y.distanceToPoint(ne))return!1;return!0}},{key:'containsPoint',value:function(e){var t=this.planes,a=!0,n=void 0;for(n=0;6>n;++n)if(0>t[n].distanceToPoint(e)){a=!1;break}return a}}]),e}(),ye=new L,ie=new L,oe=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L;O(this,e),this.start=t,this.end=a}return B(e,[{key:'set',value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:'copy',value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'getCenter',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L;return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:'delta',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L;return e.subVectors(this.end,this.start)}},{key:'lengthSquared',value:function(){return this.start.distanceToSquared(this.end)}},{key:'length',value:function(){return this.start.distanceTo(this.end)}},{key:'at',value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:'closestPointToPointParameter',value:function(e,a){ye.subVectors(e,this.start),ie.subVectors(this.end,this.start);var n=ie.dot(ie),l=ie.dot(ye),y=a?A(M(l/n,0),1):l/n;return y}},{key:'closestPointToPoint',value:function(e){var a=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new L,l=this.closestPointToPointParameter(e,a);return this.delta(n).multiplyScalar(l).add(this.start)}},{key:'equals',value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}]),e}(),re=new L,ue=new L,se=new L,c=function(){function e(){O(this,e),this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return B(e,[{key:'set',value:function(e,t,a,n,l,y,i,o,r,u,s,d,c,x,m,k){var v=this.elements;return v[0]=e,v[4]=t,v[8]=a,v[12]=n,v[1]=l,v[5]=y,v[9]=i,v[13]=o,v[2]=r,v[6]=u,v[10]=s,v[14]=d,v[3]=c,v[7]=x,v[11]=m,v[15]=k,this}},{key:'identity',value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:'copy',value:function(e){var t=e.elements,a=this.elements;return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],this}},{key:'clone',value:function(){return new this.constructor().fromArray(this.elements)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n=void 0;for(n=0;16>n;++n)a[n]=e[n+t];return this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=this.elements,n=void 0;for(n=0;16>n;++n)e[n+t]=a[n];return e}},{key:'getMaxScaleOnAxis',value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],a=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return X(M(t,a,n))}},{key:'copyPosition',value:function(e){var t=this.elements,a=e.elements;return t[12]=a[12],t[13]=a[13],t[14]=a[14],this}},{key:'setPosition',value:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this}},{key:'extractBasis',value:function(e,t,a){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}},{key:'makeBasis',value:function(e,t,a){return this.set(e.x,t.x,a.x,0,e.y,t.y,a.y,0,e.z,t.z,a.z,0,0,0,0,1),this}},{key:'extractRotation',value:function(e){var t=this.elements,a=e.elements,n=1/re.setFromMatrixColumn(e,0).length(),l=1/re.setFromMatrixColumn(e,1).length(),y=1/re.setFromMatrixColumn(e,2).length();return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=0,t[4]=a[4]*l,t[5]=a[5]*l,t[6]=a[6]*l,t[7]=0,t[8]=a[8]*y,t[9]=a[9]*y,t[10]=a[10]*y,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:'makeRotationFromEuler',value:function(t){var n=this.elements,l=t.x,i=t.y,y=t.z,o=Y(l),a=Z(l),r=Y(i),u=Z(i),s=Y(y),e=Z(y),d=void 0,c=void 0,x=void 0,m=void 0,k=void 0,v=void 0,p=void 0,z=void 0,h=void 0,g=void 0,f=void 0,S=void 0;switch(t.order){case K.XYZ:{d=o*s,c=o*e,x=a*s,m=a*e,n[0]=r*s,n[4]=-r*e,n[8]=u,n[1]=c+x*u,n[5]=d-m*u,n[9]=-a*r,n[2]=m-d*u,n[6]=x+c*u,n[10]=o*r;break}case K.YXZ:{k=r*s,v=r*e,p=u*s,z=u*e,n[0]=k+z*a,n[4]=p*a-v,n[8]=o*u,n[1]=o*e,n[5]=o*s,n[9]=-a,n[2]=v*a-p,n[6]=z+k*a,n[10]=o*r;break}case K.ZXY:{k=r*s,v=r*e,p=u*s,z=u*e,n[0]=k-z*a,n[4]=-o*e,n[8]=p+v*a,n[1]=v+p*a,n[5]=o*s,n[9]=z-k*a,n[2]=-o*u,n[6]=a,n[10]=o*r;break}case K.ZYX:{d=o*s,c=o*e,x=a*s,m=a*e,n[0]=r*s,n[4]=x*u-c,n[8]=d*u+m,n[1]=r*e,n[5]=m*u+d,n[9]=c*u-x,n[2]=-u,n[6]=a*r,n[10]=o*r;break}case K.YZX:{h=o*r,g=o*u,f=a*r,S=a*u,n[0]=r*s,n[4]=S-h*e,n[8]=f*e+g,n[1]=e,n[5]=o*s,n[9]=-a*s,n[2]=-u*s,n[6]=g*e+f,n[10]=h-S*e;break}case K.XZY:{h=o*r,g=o*u,f=a*r,S=a*u,n[0]=r*s,n[4]=-e,n[8]=u*s,n[1]=h*e+S,n[5]=o*s,n[9]=g*e-f,n[2]=f*e-g,n[6]=a*s,n[10]=S*e+h;break}}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}},{key:'makeRotationFromQuaternion',value:function(e){return this.compose(re.set(0,0,0),e,ue.set(1,1,1))}},{key:'lookAt',value:function(e,t,a){var n=this.elements,l=re,i=ue,y=se;return y.subVectors(e,t),0===y.lengthSquared()&&(y.z=1),y.normalize(),l.crossVectors(a,y),0===l.lengthSquared()&&(1===C(a.z)?y.x+=1e-4:y.z+=1e-4,y.normalize(),l.crossVectors(a,y)),l.normalize(),i.crossVectors(y,l),n[0]=l.x,n[4]=i.x,n[8]=y.x,n[1]=l.y,n[5]=i.y,n[9]=y.y,n[2]=l.z,n[6]=i.z,n[10]=y.z,this}},{key:'multiplyMatrices',value:function(e,t){var a=this.elements,n=e.elements,l=t.elements,y=n[0],i=n[4],o=n[8],r=n[12],u=n[1],s=n[5],d=n[9],c=n[13],x=n[2],m=n[6],k=n[10],v=n[14],p=n[3],z=n[7],h=n[11],g=n[15],f=l[0],S=l[4],w=l[8],P=l[12],T=l[1],q=l[5],b=l[9],V=l[13],C=l[2],F=l[6],A=l[10],M=l[14],X=l[3],Y=l[7],Z=l[11],O=l[15];return a[0]=y*f+i*T+o*C+r*X,a[4]=y*S+i*q+o*F+r*Y,a[8]=y*w+i*b+o*A+r*Z,a[12]=y*P+i*V+o*M+r*O,a[1]=u*f+s*T+d*C+c*X,a[5]=u*S+s*q+d*F+c*Y,a[9]=u*w+s*b+d*A+c*Z,a[13]=u*P+s*V+d*M+c*O,a[2]=x*f+m*T+k*C+v*X,a[6]=x*S+m*q+k*F+v*Y,a[10]=x*w+m*b+k*A+v*Z,a[14]=x*P+m*V+k*M+v*O,a[3]=p*f+z*T+h*C+g*X,a[7]=p*S+z*q+h*F+g*Y,a[11]=p*w+z*b+h*A+g*Z,a[15]=p*P+z*V+h*M+g*O,this}},{key:'multiply',value:function(e){return this.multiplyMatrices(this,e)}},{key:'premultiply',value:function(e){return this.multiplyMatrices(e,this)}},{key:'multiplyScalar',value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:'determinant',value:function(){var e=this.elements,t=e[0],a=e[4],n=e[8],l=e[12],y=e[1],i=e[5],o=e[9],r=e[13],u=e[2],s=e[6],d=e[10],c=e[14],x=e[3],m=e[7],k=e[11],v=e[15],p=t*i,z=t*o,h=t*r,g=a*y,f=a*o,S=a*r,w=n*y,P=n*i,T=n*r,q=l*y,b=l*i,V=l*o;return x*(V*s-T*s-b*d+S*d+P*c-f*c)+m*(z*c-h*d+q*d-w*c+T*u-V*u)+k*(h*s-p*c-q*s+g*c+b*u-S*u)+v*(-P*u-z*s+p*d+w*s-g*d+f*u)}},{key:'getInverse',value:function(e){var t=this.elements,a=e.elements,n=a[0],l=a[1],y=a[2],i=a[3],o=a[4],r=a[5],u=a[6],s=a[7],d=a[8],c=a[9],x=a[10],m=a[11],k=a[12],v=a[13],p=a[14],z=a[15],h=c*p*s-v*x*s+v*u*m-r*p*m-c*u*z+r*x*z,g=k*x*s-d*p*s-k*u*m+o*p*m+d*u*z-o*x*z,f=d*v*s-k*c*s+k*r*m-o*v*m-d*r*z+o*c*z,S=k*c*u-d*v*u-k*r*x+o*v*x+d*r*p-o*c*p,w=n*h+l*g+y*f+i*S,P=void 0;return 0==w?(console.error('Can\'t invert matrix, determinant is zero',e),this.identity()):(P=1/w,t[0]=h*P,t[1]=(v*x*i-c*p*i-v*y*m+l*p*m+c*y*z-l*x*z)*P,t[2]=(r*p*i-v*u*i+v*y*s-l*p*s-r*y*z+l*u*z)*P,t[3]=(c*u*i-r*x*i-c*y*s+l*x*s+r*y*m-l*u*m)*P,t[4]=g*P,t[5]=(d*p*i-k*x*i+k*y*m-n*p*m-d*y*z+n*x*z)*P,t[6]=(k*u*i-o*p*i-k*y*s+n*p*s+o*y*z-n*u*z)*P,t[7]=(o*x*i-d*u*i+d*y*s-n*x*s-o*y*m+n*u*m)*P,t[8]=f*P,t[9]=(k*c*i-d*v*i-k*l*m+n*v*m+d*l*z-n*c*z)*P,t[10]=(o*v*i-k*r*i+k*l*s-n*v*s-o*l*z+n*r*z)*P,t[11]=(d*r*i-o*c*i-d*l*s+n*c*s+o*l*m-n*r*m)*P,t[12]=S*P,t[13]=(d*v*y-k*c*y+k*l*x-n*v*x-d*l*p+n*c*p)*P,t[14]=(k*r*y-o*v*y-k*l*u+n*v*u+o*l*p-n*r*p)*P,t[15]=(o*c*y-d*r*y+d*l*u-n*c*u-o*l*x+n*r*x)*P),this}},{key:'transpose',value:function(){var e=this.elements,a=void 0;return a=e[1],e[1]=e[4],e[4]=a,a=e[2],e[2]=e[8],e[8]=a,a=e[6],e[6]=e[9],e[9]=a,a=e[3],e[3]=e[12],e[12]=a,a=e[7],e[7]=e[13],e[13]=a,a=e[11],e[11]=e[14],e[14]=a,this}},{key:'scale',value:function(e,t,a){var n=this.elements;return n[0]*=e,n[4]*=t,n[8]*=a,n[1]*=e,n[5]*=t,n[9]*=a,n[2]*=e,n[6]*=t,n[10]*=a,n[3]*=e,n[7]*=t,n[11]*=a,this}},{key:'makeScale',value:function(e,t,a){return this.set(e,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1),this}},{key:'makeTranslation',value:function(e,t,a){return this.set(1,0,0,e,0,1,0,t,0,0,1,a,0,0,0,1),this}},{key:'makeRotationX',value:function(e){var t=Y(e),a=Z(e);return this.set(1,0,0,0,0,t,-a,0,0,a,t,0,0,0,0,1),this}},{key:'makeRotationY',value:function(e){var t=Y(e),a=Z(e);return this.set(t,0,a,0,0,1,0,0,-a,0,t,0,0,0,0,1),this}},{key:'makeRotationZ',value:function(e){var t=Y(e),a=Z(e);return this.set(t,-a,0,0,a,t,0,0,0,0,1,0,0,0,0,1),this}},{key:'makeRotationAxis',value:function(e,a){var n=Y(a),l=Z(a),i=1-n,t=e.x,o=e.y,y=e.z,r=i*t,u=i*o;return this.set(r*t+n,r*o-l*y,r*y+l*o,0,r*o+l*y,u*o+n,u*y-l*t,0,r*y-l*o,u*y+l*t,i*y*y+n,0,0,0,0,1),this}},{key:'makeShear',value:function(e,t,a){return this.set(1,t,a,0,e,1,a,0,e,t,1,0,0,0,0,1),this}},{key:'compose',value:function(e,t,a){var n=this.elements,l=t.x,i=t.y,y=t.z,o=t.w,r=l+l,u=i+i,s=y+y,d=l*r,c=l*u,x=l*s,m=i*u,k=i*s,v=y*s,p=o*r,z=o*u,h=o*s,g=a.x,f=a.y,S=a.z;return n[0]=(1-(m+v))*g,n[1]=(c+h)*g,n[2]=(x-z)*g,n[3]=0,n[4]=(c-h)*f,n[5]=(1-(d+v))*f,n[6]=(k+p)*f,n[7]=0,n[8]=(x+z)*S,n[9]=(k-p)*S,n[10]=(1-(d+m))*S,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}},{key:'decompose',value:function(e,t,a){var n=this.elements,l=n[0],y=n[1],i=n[2],o=n[4],r=n[5],u=n[6],s=n[8],d=n[9],c=n[10],x=this.determinant(),m=re.set(l,y,i).length()*(0>x?-1:1),k=re.set(o,r,u).length(),v=re.set(s,d,c).length(),p=1/m,z=1/k,h=1/v;return e.x=n[12],e.y=n[13],e.z=n[14],n[0]*=p,n[1]*=p,n[2]*=p,n[4]*=z,n[5]*=z,n[6]*=z,n[8]*=h,n[9]*=h,n[10]*=h,t.setFromRotationMatrix(this),n[0]=l,n[1]=y,n[2]=i,n[4]=o,n[5]=r,n[6]=u,n[8]=s,n[9]=d,n[10]=c,a.x=m,a.y=k,a.z=v,this}},{key:'makePerspective',value:function(e,t,a,n,l,y){var i=this.elements;return i[0]=2*l/(t-e),i[4]=0,i[8]=(t+e)/(t-e),i[12]=0,i[1]=0,i[5]=2*l/(a-n),i[9]=(a+n)/(a-n),i[13]=0,i[2]=0,i[6]=0,i[10]=-(y+l)/(y-l),i[14]=-2*y*l/(y-l),i[3]=0,i[7]=0,i[11]=-1,i[15]=0,this}},{key:'makeOrthographic',value:function(e,t,a,n,l,y){var i=this.elements,o=1/(t-e),r=1/(a-n),u=1/(y-l);return i[0]=2*o,i[4]=0,i[8]=0,i[12]=-((t+e)*o),i[1]=0,i[5]=2*r,i[9]=0,i[13]=-((a+n)*r),i[2]=0,i[6]=0,i[10]=-2*u,i[14]=-((y+l)*u),i[3]=0,i[7]=0,i[11]=0,i[15]=1,this}},{key:'equals',value:function(e){var t=this.elements,a=e.elements,n=!0,l=void 0;for(l=0;n&&16>l;++l)t[l]!==a[l]&&(n=!1);return n}}]),e}(),de=[new L,new L,new L,new L],ce=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L;O(this,e),this.origin=t,this.direction=a}return B(e,[{key:'set',value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:'copy',value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'at',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L;return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:'lookAt',value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:'recast',value:function(e){return this.origin.copy(this.at(e,de[0])),this}},{key:'closestPointToPoint',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L,a=t.subVectors(e,this.origin).dot(this.direction);return 0<=a?t.copy(this.direction).multiplyScalar(a).add(this.origin):t.copy(this.origin)}},{key:'distanceSquaredToPoint',value:function(e){var t=de[0].subVectors(e,this.origin).dot(this.direction);return 0>t?this.origin.distanceToSquared(e):de[0].copy(this.direction).multiplyScalar(t).add(this.origin).distanceToSquared(e)}},{key:'distanceToPoint',value:function(e){return X(this.distanceSquaredToPoint(e))}},{key:'distanceToPlane',value:function(e){var a=e.normal.dot(this.direction),n=0===a?0===e.distanceToPoint(this.origin)?0:-1:-(this.origin.dot(e.normal)+e.constant)/a;return 0<=n?n:null}},{key:'distanceSquaredToSegment',value:function(e,t,a,n){var l=de[0].copy(e).add(t).multiplyScalar(.5),y=de[1].copy(t).sub(e).normalize(),i=de[2].copy(this.origin).sub(l),o=.5*e.distanceTo(t),r=-this.direction.dot(y),u=i.dot(this.direction),s=-i.dot(y),d=i.lengthSq(),c=C(1-r*r),x=void 0,m=void 0,k=void 0,v=void 0,p=void 0;return 0<c?(x=r*s-u,m=r*u-s,k=o*c,0<=x?m>=-k?m<=k?(v=1/c,x*=v,m*=v,p=x*(x+r*m+2*u)+m*(r*x+m+2*s)+d):(m=o,x=M(0,-(r*m+u)),p=-x*x+m*(m+2*s)+d):(m=-o,x=M(0,-(r*m+u)),p=-x*x+m*(m+2*s)+d):m<=-k?(x=M(0,-(-r*o+u)),m=0<x?-o:A(M(-o,-s),o),p=-x*x+m*(m+2*s)+d):m<=k?(x=0,m=A(M(-o,-s),o),p=m*(m+2*s)+d):(x=M(0,-(r*o+u)),m=0<x?o:A(M(-o,-s),o),p=-x*x+m*(m+2*s)+d)):(m=0<r?-o:o,x=M(0,-(r*m+u)),p=-x*x+m*(m+2*s)+d),void 0!==a&&a.copy(this.direction).multiplyScalar(x).add(this.origin),void 0!==n&&n.copy(y).multiplyScalar(m).add(l),p}},{key:'intersectSphere',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L,a=de[0].subVectors(e.center,this.origin),n=a.dot(this.direction),l=a.dot(a)-n*n,y=e.radius*e.radius,i=null,o=void 0,r=void 0,u=void 0;return l<=y&&(o=X(y-l),r=n-o,u=n+o,(0<=r||0<=u)&&(i=0>r?this.at(u,t):this.at(r,t))),i}},{key:'intersectsSphere',value:function(e){return this.distanceToPoint(e.center)<=e.radius}},{key:'intersectPlane',value:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L,n=this.distanceToPlane(e);return null===n?null:this.at(n,a)}},{key:'intersectsPlane',value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t}},{key:'intersectBox',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L,a=this.origin,n=this.direction,l=e.min,y=e.max,i=1/n.x,o=1/n.y,r=1/n.z,u=null,s=void 0,d=void 0,c=void 0,x=void 0,m=void 0,k=void 0;return 0<=i?(s=(l.x-a.x)*i,d=(y.x-a.x)*i):(s=(y.x-a.x)*i,d=(l.x-a.x)*i),0<=o?(c=(l.y-a.y)*o,x=(y.y-a.y)*o):(c=(y.y-a.y)*o,x=(l.y-a.y)*o),s<=x&&c<=d&&((c>s||s!=s)&&(s=c),(x<d||d!=d)&&(d=x),0<=r?(m=(l.z-a.z)*r,k=(y.z-a.z)*r):(m=(y.z-a.z)*r,k=(l.z-a.z)*r),s<=k&&m<=d&&((m>s||s!=s)&&(s=m),(k<d||d!=d)&&(d=k),0<=d&&(u=this.at(0<=s?s:d,t)))),u}},{key:'intersectsBox',value:function(e){return null!==this.intersectBox(e,de[0])}},{key:'intersectTriangle',value:function(e,t,a,n,l){var y=this.direction,i=de[0],o=de[1],r=de[2],u=de[3],s=null,d=void 0,c=void 0,x=void 0,m=void 0,k=void 0;return o.subVectors(t,e),r.subVectors(a,e),u.crossVectors(o,r),d=y.dot(u),0===d||n&&0<d||(0<d?c=1:(c=-1,d=-d),i.subVectors(this.origin,e),x=c*y.dot(r.crossVectors(i,r)),0<=x&&(m=c*y.dot(o.cross(i)),0<=m&&x+m<=d&&(k=-c*i.dot(u),0<=k&&(s=this.at(k/d,l))))),s}},{key:'applyMatrix4',value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:'equals',value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}]),e}(),xe=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;O(this,e),this.radius=t,this.phi=a,this.theta=n}return B(e,[{key:'set',value:function(e,t,a){return this.radius=e,this.phi=t,this.theta=a,this}},{key:'copy',value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'setFromVector3',value:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=P(e.x,e.z),this.phi=F(A(M(e.y/this.radius,-1),1))),this.makeSafe()}},{key:'makeSafe',value:function(){return this.phi=M(1e-6,A(i-1e-6,this.phi)),this}}]),e}(),me=function(){function e(){O(this,e),this.elements=new Float32Array([1,0,0,1,0,1])}return B(e,[{key:'set',value:function(t,a,n,l,y,i){var o=this.elements;return o[0]=t,o[1]=a,o[3]=l,o[2]=n,o[4]=y,o[5]=i,this}},{key:'identity',value:function(){return this.set(1,0,0,1,0,1),this}},{key:'copy',value:function(e){var t=e.elements;return this.set(t[0],t[1],t[2],t[3],t[4],t[5]),this}},{key:'clone',value:function(){return new this.constructor().copy(this)}},{key:'toMatrix3',value:function(e){var t=e.elements;e.set(t[0],t[1],t[2],t[1],t[3],t[4],t[2],t[4],t[5])}},{key:'add',value:function(e){var t=this.elements,a=e.elements;return t[0]+=a[0],t[1]+=a[1],t[3]+=a[3],t[2]+=a[2],t[4]+=a[4],t[5]+=a[5],this}},{key:'norm',value:function(){var t=this.elements,e=t[1]*t[1],a=t[2]*t[2],n=t[4]*t[4];return X(t[0]*t[0]+e+a+e+t[3]*t[3]+n+a+n+t[5]*t[5])}},{key:'off',value:function(){var t=this.elements;return X(2*(t[1]*t[1]+t[2]*t[2]+t[4]*t[4]))}},{key:'applyToVector3',value:function(t){var a=t.x,n=t.y,l=t.z,y=this.elements;return t.x=y[0]*a+y[1]*n+y[2]*l,t.y=y[1]*a+y[3]*n+y[4]*l,t.z=y[2]*a+y[4]*n+y[5]*l,t}},{key:'equals',value:function(e){var t=this.elements,a=e.elements,n=!0,l=void 0;for(l=0;n&&6>l;++l)t[l]!==a[l]&&(n=!1);return n}}],[{key:'calculateIndex',value:function(e,t){return 3-(3-e)*(2-e)/2+t}}]),e}(),ke=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;O(this,e),this.x=t,this.y=a,this.z=n,this.w=l}return B(e,[{key:'set',value:function(e,t,a,n){return this.x=e,this.y=t,this.z=a,this.w=n,this}},{key:'copy',value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:'clone',value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:'fromArray',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:'toArray',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:'setAxisAngleFromQuaternion',value:function(e){this.w=2*F(e.w);var t=X(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:'setAxisAngleFromRotationMatrix',value:function(e){var t=.01,a=.1,n=e.elements,l=n[0],o=n[4],r=n[8],u=n[1],d=n[5],c=n[9],m=n[2],k=n[6],v=n[10],p=void 0,h=void 0,g=void 0,f=void 0,S=void 0,w=void 0,P=void 0,T=void 0,q=void 0,b=void 0,V=void 0;return C(o-u)<t&&C(r-m)<t&&C(c-k)<t?C(o+u)<a&&C(r+m)<a&&C(c+k)<a&&C(l+d+v-3)<a?this.set(1,0,0,0):(p=i,S=(l+1)/2,w=(d+1)/2,P=(v+1)/2,T=(o+u)/4,q=(r+m)/4,b=(c+k)/4,S>w&&S>P?S<t?(h=0,g=.707106781,f=.707106781):(h=X(S),g=T/h,f=q/h):w>P?w<t?(h=.707106781,g=0,f=.707106781):(g=X(w),h=T/g,f=b/g):P<t?(h=.707106781,g=.707106781,f=0):(f=X(P),h=q/f,g=b/f),this.set(h,g,f,p)):(V=X((k-c)*(k-c)+(r-m)*(r-m)+(u-o)*(u-o)),.001>C(V)&&(V=1),this.x=(k-c)/V,this.y=(r-m)/V,this.z=(u-o)/V,this.w=F((l+d+v-1)/2)),this}},{key:'add',value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:'addScalar',value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:'addVectors',value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:'addScaledVector',value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:'sub',value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:'subScalar',value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:'subVectors',value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:'multiply',value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:'multiplyScalar',value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:'multiplyVectors',value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this.w=e.w*t.w,this}},{key:'divide',value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}},{key:'divideScalar',value:function(e){return this.x/=e,this.y/=e,this.z/=e,this.w/=e,this}},{key:'applyMatrix4',value:function(t){var a=this.x,n=this.y,l=this.z,y=this.w,i=t.elements;return this.x=i[0]*a+i[4]*n+i[8]*l+i[12]*y,this.y=i[1]*a+i[5]*n+i[9]*l+i[13]*y,this.z=i[2]*a+i[6]*n+i[10]*l+i[14]*y,this.w=i[3]*a+i[7]*n+i[11]*l+i[15]*y,this}},{key:'negate',value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:'dot',value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:'manhattanLength',value:function(){return C(this.x)+C(this.y)+C(this.z)+C(this.w)}},{key:'lengthSquared',value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:'length',value:function(){return X(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:'manhattanDistanceTo',value:function(e){return C(this.x-e.x)+C(this.y-e.y)+C(this.z-e.z)+C(this.w-e.w)}},{key:'distanceToSquared',value:function(e){var t=this.x-e.x,a=this.y-e.y,n=this.z-e.z,l=this.w-e.w;return t*t+a*a+n*n+l*l}},{key:'distanceTo',value:function(e){return X(this.distanceToSquared(e))}},{key:'normalize',value:function(){return this.divideScalar(this.length())}},{key:'setLength',value:function(e){return this.normalize().multiplyScalar(e)}},{key:'min',value:function(e){return this.x=A(this.x,e.x),this.y=A(this.y,e.y),this.z=A(this.z,e.z),this.w=A(this.w,e.w),this}},{key:'max',value:function(e){return this.x=M(this.x,e.x),this.y=M(this.y,e.y),this.z=M(this.z,e.z),this.w=M(this.w,e.w),this}},{key:'clamp',value:function(e,t){return this.x=M(e.x,A(t.x,this.x)),this.y=M(e.y,A(t.y,this.y)),this.z=M(e.z,A(t.z,this.z)),this.w=M(e.w,A(t.w,this.w)),this}},{key:'floor',value:function(){return this.x=V(this.x),this.y=V(this.y),this.z=V(this.z),this.w=V(this.w),this}},{key:'ceil',value:function(){return this.x=T(this.x),this.y=T(this.y),this.z=T(this.z),this.w=T(this.w),this}},{key:'round',value:function(){return this.x=w(this.x),this.y=w(this.y),this.z=w(this.z),this.w=w(this.w),this}},{key:'lerp',value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:'lerpVectors',value:function(e,t,a){return this.subVectors(t,e).multiplyScalar(a).add(e)}},{key:'equals',value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}}]),e}(),ve=new L,pe=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new L;O(this,e),this.min=t,this.max=a,this.children=null}return B(e,[{key:'getCenter',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L;return e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:'getDimensions',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L;return e.subVectors(this.max,this.min)}},{key:'split',value:function(){var e=this.min,t=this.max,a=this.getCenter(ve),n=this.children=[null,null,null,null,null,null,null,null],l=void 0,y=void 0;for(l=0;8>l;++l)y=ze[l],n[l]=new this.constructor(new L(0===y[0]?e.x:a.x,0===y[1]?e.y:a.y,0===y[2]?e.z:a.z),new L(0===y[0]?a.x:t.x,0===y[1]?a.y:t.y,0===y[2]?a.z:t.z))}}]),e}(),ze=[new Uint8Array([0,0,0]),new Uint8Array([0,0,1]),new Uint8Array([0,1,0]),new Uint8Array([0,1,1]),new Uint8Array([1,0,0]),new Uint8Array([1,0,1]),new Uint8Array([1,1,0]),new Uint8Array([1,1,1])],he=[new Uint8Array([0,4]),new Uint8Array([1,5]),new Uint8Array([2,6]),new Uint8Array([3,7]),new Uint8Array([0,2]),new Uint8Array([1,3]),new Uint8Array([4,6]),new Uint8Array([5,7]),new Uint8Array([0,1]),new Uint8Array([2,3]),new Uint8Array([4,5]),new Uint8Array([6,7])],ge=new L,fe=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;O(this,e),this.min=t,this.size=a,this.children=null}return B(e,[{key:'getCenter',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L;return e.copy(this.min).addScalar(.5*this.size)}},{key:'getDimensions',value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new L;return e.set(this.size,this.size,this.size)}},{key:'split',value:function(){var e=this.min,t=this.getCenter(ge),a=.5*this.size,n=this.children=[null,null,null,null,null,null,null,null],l=void 0,y=void 0;for(l=0;8>l;++l)y=ze[l],n[l]=new this.constructor(new L(0===y[0]?e.x:t.x,0===y[1]?e.y:t.y,0===y[2]?e.z:t.z),a)}},{key:'max',get:function(){return this.min.clone().addScalar(this.size)}}]),e}(),Se=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,a=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];O(this,e),this.value=t,this.done=a}return B(e,[{key:'reset',value:function(){this.value=null,this.done=!1}}]),e}(),we=new v,Pe=function(){function e(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;O(this,e),this.octree=t,this.region=a,this.cull=null!==a,this.result=new Se,this.trace=null,this.indices=null,this.reset()}return B(e,[{key:'reset',value:function(){var e=this.octree.root;return this.trace=[],this.indices=[],null!==e&&(we.min=e.min,we.max=e.max,(!this.cull||this.region.intersectsBox(we))&&(this.trace.push(e),this.indices.push(0))),this.result.reset(),this}},{key:'next',value:function(){for(var e=this.cull,t=this.region,a=this.indices,n=this.trace,l=null,y=n.length-1,i=void 0,o=void 0,r=void 0;null===l&&0<=y;)if(i=a[y]++,o=n[y].children,!(8>i))n.pop(),a.pop(),--y;else if(null!==o){if(r=o[i],e&&(we.min=r.min,we.max=r.max,!t.intersectsBox(we)))continue;n.push(r),a.push(0),++y}else l=n.pop(),a.pop();return this.result.value=l,this.result.done=null===l,this.result}},{key:'return',value:function(e){return this.result.value=e,this.result.done=!0,this.result}},{key:Symbol.iterator,value:function(){return this}}]),e}(),Te=[new L,new L,new L],qe=new v,be=new ce,r=[new Uint8Array([4,2,1]),new Uint8Array([5,3,8]),new Uint8Array([6,8,3]),new Uint8Array([7,8,8]),new Uint8Array([8,6,5]),new Uint8Array([8,7,8]),new Uint8Array([8,8,7]),new Uint8Array([8,8,8])],Ve=0,Ce=function(){function e(){O(this,e)}return B(e,null,[{key:'intersectOctree',value:function(e,t,a){var n=qe.min.set(0,0,0),l=qe.max.subVectors(e.max,e.min),i=e.getDimensions(Te[0]),o=Te[1].copy(i).multiplyScalar(.5),r=be.origin.copy(t.ray.origin),u=be.direction.copy(t.ray.direction),s=void 0,d=void 0,c=void 0,x=void 0,m=void 0,k=void 0,v=void 0,p=void 0,z=void 0;r.sub(e.getCenter(Te[2])).add(o),Ve=0,0>u.x&&(r.x=i.x-r.x,u.x=-u.x,Ve|=4),0>u.y&&(r.y=i.y-r.y,u.y=-u.y,Ve|=2),0>u.z&&(r.z=i.z-r.z,u.z=-u.z,Ve|=1),s=1/u.x,d=1/u.y,c=1/u.z,x=(n.x-r.x)*s,m=(l.x-r.x)*s,k=(n.y-r.y)*d,v=(l.y-r.y)*d,p=(n.z-r.z)*c,z=(l.z-r.z)*c,M(M(x,k),p)<A(A(m,v),z)&&y(e.root,x,k,p,m,v,z,t,a)}}]),e}(),Fe=new v,Ae=function(){function e(t,a){O(this,e),this.root=void 0!==t&&void 0!==a?new pe(t,a):null}return B(e,[{key:'getCenter',value:function(e){return this.root.getCenter(e)}},{key:'getDimensions',value:function(e){return this.root.getDimensions(e)}},{key:'getDepth',value:function(){return o(this.root)}},{key:'cull',value:function(e){var t=[];return s(this.root,e,t),t}},{key:'findOctantsByLevel',value:function(e){var t=[];return d(this.root,e,0,t),t}},{key:'raycast',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return Ce.intersectOctree(this,e,t),t}},{key:'leaves',value:function(e){return new Pe(this,e)}},{key:Symbol.iterator,value:function(){return new Pe(this)}},{key:'min',get:function(){return this.root.min}},{key:'max',get:function(){return this.root.max}},{key:'children',get:function(){return this.root.children}}]),e}(),Me=new L,p=function(e){function t(e,a){O(this,t);var n=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a));return n.points=null,n.data=null,n}return _(t,e),B(t,[{key:'distanceToSquared',value:function(e){var t=Me.copy(e).clamp(this.min,this.max);return t.sub(e).lengthSquared()}},{key:'distanceToCenterSquared',value:function(e){var t=this.getCenter(Me),a=e.x-t.x,n=e.y-t.x,l=e.z-t.z;return a*a+n*n+l*l}},{key:'contains',value:function(e,t){var a=this.min,n=this.max;return e.x>=a.x-t&&e.y>=a.y-t&&e.z>=a.z-t&&e.x<=n.x+t&&e.y<=n.y+t&&e.z<=n.z+t}},{key:'redistribute',value:function(e){var t=this.children,a=this.points,n=this.data,l=void 0,y=void 0,o=void 0,r=void 0,u=void 0,s=void 0,d=void 0;if(null!==t&&null!==a)for(l=0,o=a.length;l<o;++l)for(s=a[l],d=n[l],(y=0,r=t.length);y<r;++y)if(u=t[y],u.contains(s,e)){null===u.points&&(u.points=[],u.data=[]),u.points.push(s),u.data.push(d);break}this.points=null,this.data=null}},{key:'merge',value:function(){var e=this.children,t=void 0,a=void 0,n=void 0;if(null!==e){for(this.points=[],this.data=[],(t=0,a=e.length);t<a;++t)if(n=e[t],null!==n.points){var y,o;(y=this.points).push.apply(y,D(n.points)),(o=this.data).push.apply(o,D(n.data))}this.children=null}}}]),t}(pe),Xe=function e(t,a,n){var l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;O(this,e),this.distance=t,this.distanceToRay=a,this.point=n,this.object=l},Ye=1e-6,Ze=function(e){function t(e,a){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:8,y=4<arguments.length&&void 0!==arguments[4]?arguments[4]:8;O(this,t);var i=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.root=new p(e,a),i.bias=M(0,n),i.maxPoints=M(1,w(l)),i.maxDepth=M(0,w(y)),i.pointCount=0,i}return _(t,e),B(t,[{key:'countPoints',value:function(e){return x(e)}},{key:'put',value:function(e,t){return k(e,t,this,this.root,0)}},{key:'remove',value:function(e){return z(e,this,this.root,null)}},{key:'fetch',value:function(e){return h(e,this,this.root)}},{key:'move',value:function(e,t){return g(e,t,this,this.root,null,0)}},{key:'findNearestPoint',value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return f(e,t,a,this.root)}},{key:'findPoints',value:function(e,t){var a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],n=[];return S(e,t,a,this.root,n),n}},{key:'raycast',value:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'raycast',this).call(this,e);return 0<n.length&&this.testPoints(n,e,a),a}},{key:'testPoints',value:function(e,t,a){var n=t.params.Points.threshold,l=void 0,y=void 0,o=void 0,r=void 0,u=void 0,s=void 0,d=void 0,c=void 0,x=void 0,m=void 0,k=void 0;for(u=0,d=e.length;u<d;++u)if(x=e[u],m=x.points,null!==m)for(s=0,c=m.length;s<c;++s)k=m[s],r=t.ray.distanceSqToPoint(k),r<n*n&&(l=t.ray.closestPointToPoint(k,new L),y=t.ray.origin.distanceTo(l),y>=t.near&&y<=t.far&&(o=X(r),a.push(new Xe(y,o,l,x.data[s]))))}}]),t}(Ae),Oe=new v,Be=new L,Ee=new L,u=new L,_e=function(){function e(){O(this,e)}return B(e,null,[{key:'recycleOctants',value:function(e,t){var a=e.min,n=e.getCenter(Ee),y=e.getDimensions(u).multiplyScalar(.5),o=e.children,r=t.length,l=void 0,s=void 0,d=void 0,c=void 0;for(l=0;8>l;++l)for(d=ze[l],Oe.min.addVectors(a,Be.fromArray(d).multiply(y)),Oe.max.addVectors(n,Be.fromArray(d).multiply(y)),s=0;s<r;++s)if(c=t[s],null!==c&&Oe.min.equals(c.min)&&Oe.max.equals(c.max)){o[l]=c,t[s]=null;break}}}]),e}();e.CubicOctant=fe,e.edges=he,e.Octant=pe,e.Octree=Ae,e.OctantIterator=Pe,e.OctreeRaycaster=Ce,e.pattern=ze,e.PointOctant=p,e.PointOctree=Ze,e.RayPointIntersection=Xe,e.OctreeUtils=_e,Object.defineProperty(e,'__esModule',{value:!0})});
